(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{46:function(e,t,n){"use strict";n.r(t);var r=n(10),c=n.n(r),a=n(37),u=n.n(a),i=n(11),s=n(28),o=n(12),j=n(17),b=n(4),l=n(24),O=n(7),d=function(){var e=Object(j.d)(),t=Object(r.useState)(),n=Object(i.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(!0),s=Object(i.a)(u,2),o=s[0],d=s[1],f=Object(r.useState)({email:"",password:""}),p=Object(i.a)(f,2),x=p[0],h=p[1],v=function(e){var t=e.target,n=t.value,r=t.name;h((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(b.a)({},r,n))}))};console.log(x);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{onSubmit:function(t){var n;t.preventDefault(),o?Object(j.c)(e,x.email,x.password).then((function(e){var t=e.user;console.log(t)})).catch((function(e){a(e.code)})):n=Object(j.f)(e,x.email,x.password).catch((function(e){a(e.code)})),console.log(n)},children:[Object(O.jsx)("input",{name:"email",placeholder:"email",type:"email",required:!0,value:x.email,onChange:v}),Object(O.jsx)("input",{name:"password",placeholder:"password",type:"password",required:!0,value:x.password,onChange:v}),Object(O.jsx)("input",{type:"submit",value:o?"Create a new account":"Log In"}),c]}),Object(O.jsx)("span",{onClick:function(){return d((function(e){return!e}))},children:o?"Log In":"Create New Account"})]})},f=function(){var e=Object(j.d)(),t=function(t){var n;"google"===t.target.name?n=new j.b:"github"===t.target.name&&(n=new j.a),Object(j.g)(e,n)};return Object(O.jsxs)("div",{children:[Object(O.jsx)(d,{}),Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:t,name:"google",children:"Continue with Google"}),Object(O.jsx)("button",{onClick:t,name:"github",children:"Continue with GitHub"})]})]})},p=n(0),x=n.n(p),h=n(16),v=n(2),m=n(14),g=n(38),w=(Object(g.a)({apiKey:"AIzaSyCB81qTggv_SEG5OVG4GzVHhnKAnIvfKH8",authDomain:"nwitter-7f818.firebaseapp.com",databaseURL:"https://nwitter-7f818-default-rtdb.asia-southeast1.firebasedatabase.app/",projectId:"nwitter-7f818",storageBucket:"nwitter-7f818.appspot.com",messagingSenderId:"1015018452610",appId:"1:1015018452610:web:e8861721cd848f9726a69b"}),Object(j.d)(),Object(m.f)()),y=n(27),k=function(e){var t=e.data,n=e.isOwner,c=Object(r.useState)(!1),a=Object(i.a)(c,2),u=a[0],s=a[1],o=Object(r.useState)(t.text),j=Object(i.a)(o,2),b=j[0],l=j[1],d=function(){var e=Object(v.a)(x.a.mark((function e(n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b!==t.text){e.next=3;break}return e.abrupt("return",s(!1));case 3:if(!window.confirm("Are you sure to change?")){e.next=17;break}return e.prev=5,r=Object(m.d)(w,"nweet",t.id),e.next=9,Object(m.k)(r,{text:b});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),alert("\ubb54\uac00 \uc798\ubabb\ub410\uc5b4\uc694!"),e.abrupt("return");case 15:s(!1),alert("Edit compelete");case 17:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}();console.log(u);var f=function(){var e=Object(v.a)(x.a.mark((function e(){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure to Delete?")){e.next=16;break}return e.prev=2,e.next=5,Object(m.c)(Object(m.d)(w,"nweet",t.id));case 5:if(!t.url){e.next=9;break}return n=Object(y.c)(),e.next=9,Object(y.a)(Object(y.d)(n,t.url));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(2),alert("\ubb54\uac00 \uc798\ubabb\ub410\uc5b4\uc694!"),e.abrupt("return");case 15:alert("Delete compelete");case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[u?Object(O.jsx)("form",{onSubmit:d,children:Object(O.jsx)("input",{type:"text",placeholder:"Edit yout feeling",value:b,onChange:function(e){l(e.target.value)},required:!0})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h4",{children:t.text}),t.url&&Object(O.jsx)("img",{src:t.url,width:"50px",height:"50px"})]}),n&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){s((function(e){return!e}))},children:u?"cancel":"edit"}),Object(O.jsx)("button",{onClick:u?d:f,children:u?"edit!":"delete"})]})]})},S=n(30),C=n(48),I=function(e){var t=e.userObj,n=Object(r.useState)(""),c=Object(i.a)(n,2),a=c[0],u=c[1],s=Object(r.useRef)(),o=Object(r.useState)(),j=Object(i.a)(o,2),b=j[0],l=j[1],d=function(){var e=Object(v.a)(x.a.mark((function e(n){var r,c,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r="",""==b){e.next=11;break}return c=Object(S.b)(),i=Object(S.c)(c,"".concat(t.uid,"/").concat(Object(C.a)())),e.next=7,Object(S.d)(i,b,"data_url");case 7:return e.next=9,Object(S.a)(i);case 9:r=e.sent,console.log(r);case 11:return o={text:a,createdAt:Date.now(),creator:t.uid,url:r},e.next=14,Object(m.a)(Object(m.b)(w,"nweet"),o);case 14:s.current.value=null,u(""),l("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{onSubmit:d,children:[Object(O.jsx)("input",{name:"nweet",type:"text",onChange:function(e){var t=e.target,n=t.value;"nweet"===t.name&&u(n)},value:a,placeholder:"What's on your mind",maxLength:120}),Object(O.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files,n=t[0];console.log(t);var r=new FileReader;r.onloadend=function(e){return l(e.currentTarget.result)},r.readAsDataURL(n)},ref:s}),b&&Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{src:b,style:{height:100,width:100}}),Object(O.jsx)("button",{onClick:function(){l(null),s.current.value=null},children:"clear photo"})]}),Object(O.jsx)("input",{type:"submit",value:"twit"})]})},A=function(e){var t=e.userObj,n=Object(r.useState)([]),c=Object(i.a)(n,2),a=c[0],u=c[1],s=function(){var e=Object(v.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.e)(Object(m.b)(w,"nweet"));case 2:return t=e.sent,e.next=5,t.forEach((function(e){var t=Object(l.a)({id:e.id},e.data());u((function(e){return[].concat(Object(h.a)(e),[t])}))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=Object(m.j)(Object(m.b)(w,"nweet"),Object(m.i)("createdAt"),Object(m.g)(3)),t=Object(m.h)(e,(function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));u(t)}));return function(){return t()}}),[]),console.log(t.uid),Object(O.jsxs)("div",{children:[Object(O.jsx)(I,{userObj:t}),a.map((function(e){return Object(O.jsx)(k,{data:e,isOwner:e.creator===t.uid},e.id)})),Object(O.jsx)("button",{onClick:s,children:"get New!"})]})},D=function(e){var t=e.userObj;return Object(O.jsx)("nav",{children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/",children:"Home"})}),Object(O.jsx)("li",{children:Object(O.jsxs)(s.b,{to:"/profile",children:[t.displayName," \uc758 Profille"]})})]})})},N=function(e){var t=e.userObj,n=e.refreshUser,c=Object(j.d)(),a=Object(o.f)(),u=Object(r.useState)(),s=Object(i.a)(u,2),b=s[0],d=s[1],f=function(){var e=Object(v.a)(x.a.mark((function e(){var n,r,c,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(m.f)(),e.next=3,Object(m.j)(Object(m.b)(n,"nweet"),Object(m.l)("creator","==",t.uid),Object(m.i)("createdAt","desc"));case 3:return r=e.sent,e.next=6,Object(m.e)(r);case 6:return c=e.sent,e.next=9,c.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));case 9:a=e.sent,console.log(a),d(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){f()}),[]);var p=Object(r.useState)(t.displayName),h=Object(i.a)(p,2),g=h[0],w=h[1],y=function(){var e=Object(v.a)(x.a.mark((function e(r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.displayName===g){e.next=6;break}return e.next=4,t.updateProfile({displayName:g});case 4:console.log("Profile updated!"),n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{onSubmit:y,children:[Object(O.jsx)("input",{type:"text",placeholder:"Display name",value:g,onChange:function(e){var t=e.target.value;w(t)}}),Object(O.jsx)("input",{type:"submit",value:"Update Profile",onSubmit:y})]}),Object(O.jsx)("button",{onClick:function(){Object(j.h)(c),a("/")},children:"Log out"}),b&&b.map((function(e){return Object(O.jsxs)("div",{children:[""!==e.url&&Object(O.jsx)("img",{src:e.url}),Object(O.jsx)("h5",{children:e.text}),Object(O.jsx)("div",{children:e.createdAt})]},e.id)}))]})},E=function(e){var t=e.isLogIn,n=e.userObj,r=e.refreshUser;return Object(O.jsxs)(s.a,{children:[t&&Object(O.jsx)(D,{userObj:n}),Object(O.jsx)(o.c,{children:t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.a,{exact:!0,path:"/",element:Object(O.jsx)(A,{userObj:n})}),Object(O.jsx)(o.a,{exact:!0,path:"/profile",element:Object(O.jsx)(N,{userObj:n,refreshUser:r})})]}):Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(o.a,{exact:!0,path:"/",element:Object(O.jsx)(f,{})})})})]})};var L=function(){var e=Object(j.d)(),t=Object(r.useState)(!1),n=Object(i.a)(t,2),c=n[0],a=n[1],u=Object(r.useState)(null),s=Object(i.a)(u,2),o=s[0],b=s[1],l=Object(r.useState)(!1),d=Object(i.a)(l,2),f=(d[0],d[1]);return Object(r.useEffect)((function(){Object(j.e)(e,(function(e){b(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return Object(j.i)(e,t)}}:null),a(!0)}))}),[]),c?Object(O.jsx)(E,{isLogIn:Boolean(o),userObj:o,refreshUser:function(){var t=e.currentUser;f((function(e){return!e})),b({displayName:t.displayName,uid:t.uid,updateProfile:function(e){return Object(j.i)(t,e)}})}}):"Initialize..."};u.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(L,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.b3dc008e.chunk.js.map